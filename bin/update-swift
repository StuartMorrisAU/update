#!/bin/sh
set -euf

# Helpers https://github.com/sixarm/unix-shell-script-kit
. "$(dirname "$(readlink -f "$0")")/unix-shell-script-kit"

# Swift progrsmming language

expect_version="3.0.2"

parse_semver(){
    echo $(echo "$1" | sed -n 's/.* \([0-9\.]\+\).*/\1/p')
}

swift_version(){
    echo $(parse_semver "$(xcrun swift -version | head -1)")
}

if command_exists xcrun; then
    actual_version=$(swift_version)
    if [ "$expect_version" != "$actual_version" ]; then
        echo "Update Swift: expect:$expect_version, actual:$actual_version"
    fi
fi

#!/bin/sh
set -euf

# Helpers https://github.com/sixarm/unix-shell-script-kit
. "$(dirname "$(readlink -f "$0")")/unix-shell-script-kit"

# gem: Ruby package manager
if command_exists gem; then
    dir=$(gem environment | sed -n 's/ * - INSTALLATION DIRECTORY: //p')
    if [ -w "$dir" ]; then
        gem cleanup
        gem install rubygems-update
        update_rubygems
        gem update --system
        yes | gem update
        gem cleanup
    fi
fi

#!/bin/sh
set -euf

# gem: Ruby package manager
if command -v gem >/dev/null 2>&1; then
    dir=$(gem environment | sed -n 's/ * - INSTALLATION DIRECTORY: //p')
    if [ -w "$dir" ]; then
        $UPDATE gem cleanup
        $UPDATE gem install rubygems-update
        $UPDATE update_rubygems
        $UPDATE gem update --system
        $UPDATE yes | $UPDATE gem update
        $UPDATE gem cleanup
    fi
fi

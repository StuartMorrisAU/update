#!/bin/sh
set -euf

# Helpers https://github.com/sixarm/unix-shell-script-kit
. "$(dirname "$(readlink -f "$0")")/unix-shell-script-kit"

# Rust cargo package manager
if command_exists cargo; then
    if command_exists cargo-install-update; then
        cargo install-update -a
    else
        # Update installed crates via default cargo tooling,
        # which works even if `cargo-install-update` is not available.
        cargo install --list | 
        awk '/^\w/ { print $1 }' | 
        while read -r x; do
            cargo install "$x"
        done
    fi
fi
